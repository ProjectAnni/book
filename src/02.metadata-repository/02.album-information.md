# 专辑信息

对专辑信息的描述存放于元数据仓库下的 `album` 目录，以专辑的 `Catalog` 作文件名。

专辑信息通过 `toml` 描述。

## 艺术家

专辑信息中有 `artist` 和 `artists` 字段用于填写艺术家信息。其中 `artist` 字段较为简单，而 `artists` 字段则可以表示更加精确的艺术家信息。

### `artist` 字段

专辑、唱片和音轨都拥有 `artist` 字段，用于表示主要的艺术家信息。主艺术家的选取规则如下：

1. 当该曲目的类型为 `Normal` 时，主艺术家为演唱者。
2. 当该曲目的类型为 `Instrumental` 时，主艺术家为对应非 `Instrumental` 版本的演唱者或 `Composer`。
3. 当该曲目是某原曲的 `Remix/Rearrange` 时，主艺术家为 `Arranger`。
4. 当该曲目的类型为 `absolute` 时，主艺术家为 `Composer`。

### `artists` 字段

`artists` 字段用于描述更加精确的艺术家信息。该字段的继承方式与 `artist` 相同，但其中字段不继承。如下所示：

```toml
# ...
[[discs.tracks]]
title = "夏凪ぎ(Episode 9 Ver.)"
artists.vocal = "やなぎなぎ"
artists.composer = "麻枝准"
artists.lyricist = "麻枝准"
artists.arranger = "MANYO"
artists.piano = "kidlit"
artists.violin = "須原杏、沖増菜摘"
artists.viola = "梶谷裕子"
artists.cello = "渡邉雅弦"
artists.irish-harp = "梅田千晶"
```

使用 `TypeScript` 描述的类型表示如下，其中 `[]` 中的内容表示存在时向 `FLAC` 文件写入的 `Tag` 名：

```typescript
type Artists = ExtendedArtists & Record<string, string>;

interface ExtendedArtists {
  // 歌手
  vocal?: string;
  // 作曲 [COMPOSER]
  composer?: string;
  // 作词 [LYRICIST]
  lyricist?: string;
  // 编曲 [ARRANGER]
  arranger?: string;
}
```

## 示例

```toml
######################################################
# 专辑信息
[album]
#
# 专辑 ID [必填项]
#
# 表示为随机生成的 UUID
album_id = "572c5c19-0080-404b-9d8b-2eb864aea75d"
# 专辑名称 [必填项][ALBUM]
title = "夏凪ぎ/宝物になった日"
#
# 专辑类型 [可选项][ALBUM]
#
# 当该项非空时，写入 ALBUM 中的专辑名为 "{title}【{edition}】"。
edition = ""
#
# 专辑品番 [必填项]
#
# 当存在多张时用 ~ 隔开，如：
# catalog = "ALBUM-01~50"
catalog = "KSLA-0178"
#
# 专辑艺术家 [必填项]
#
# 使用「Anni 艺术家别名嵌套」格式表示具体的艺术家。
artist = "やなぎなぎ"
#
# 专辑的发行日期 [必填项][DATE]
#
# 日期有两种表示方法：
# date = { year = 2021, month = 6, day = 22 }
# date = 2021-06-22
# 
# 尽量精确到日，如果无法确定则精确到月或年。如：
# date.year = 2021
# date.month = 6
date = 2020-12-16
#
# 专辑的标签 [可选项]
#
# 用来描述专辑从属的分类。
tags = ["神様になった日"]
#
# 音乐类型 [可选项]
#
# 可选项如下所示：
# normal（默认）：有人声的歌曲。
# instrumental：无人声的伴奏。
# absolute：纯音乐。
# drama：以人声为主的单元剧。
# radio：以人声为主的广播节目。
# vocal：纯人声，如音乐现场的 MC 等。
type = "normal"

######################################################
# 光盘信息
[[discs]]
# 光盘名称 [可选项]
title = "夏凪ぎ／宝物になった日"
# 光盘艺术家 [可选项]
artist = "やなぎなぎ"
#
# 光盘品番 [必填项]
#
# 只允许表示一张光盘，不得出现 ~ 连接符。
catalog = "KSLA-0178"
#
# 光盘标签 [可选项]
#
# 会和专辑的标签合并，影响下层的标签作用域。
tags = []
#
# 音乐类型 [可选项]
#
# 用于覆盖专辑的音乐类型。
type = "normal"

######################################################
# 音轨信息
[[discs.tracks]]
# 音轨标题 [必填项][TITLE]
title = "夏凪ぎ"
#
# 音轨的标签 [可选项]
#
# 会和上层的标签合并，最终形成对每个音轨的标签。
tags = []

[[discs.tracks]]
title = "宝物になった日"

[[discs.tracks]]
title = "夏凪ぎ(Episode 9 Ver.)"
#
# 音轨的详细艺术家 [可选项]
#
artists.vocal = "やなぎなぎ"
artists.composer = "麻枝准"
artists.lyricist = "麻枝准"
artists.arranger = "MANYO"
artists.piano = "kidlit"
artists.violin = "須原杏、沖増菜摘"
artists.viola = "梶谷裕子"
artists.cello = "渡邉雅弦"
artists.irish-harp = "梅田千晶"

[[discs.tracks]]
title = "宝物になった日(Episode 5 Ver.)"

[[discs.tracks]]
title = "夏凪ぎ(Instrumental)"
#
# 艺术家 [可选项][ARTIST]
#
# 省略时，默认以光盘艺术家 -> 专辑艺术家的顺序寻找存在项。
artist = "麻枝准"
#
# 音乐类型 [可选项]
#
# 用于覆盖唱片的音乐类型，最终形成每个音轨的音乐类型。
type = "instrumental"

[[discs.tracks]]
title = "宝物になった日(Instrumental)"
artist = "麻枝准"
type = "instrumental"
```
