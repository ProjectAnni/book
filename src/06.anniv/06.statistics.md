# 播放统计

> ⚠️ 该部分尚未设计完成

`Anniv` 提供基本的播放统计功能。

## 播放记录

### Endpoint

`POST /api/statistics`

### 请求

#### 请求参数

| 参数名     | 类型        | 详情                  |
| ---------- | ----------- | --------------------- |
| `time`     | `timestamp` | 播放的时间戳          |
| `album_id` | `string`    | 播放专辑 `album_id`   |
| `disc_id`  | `int`       | 播放曲目的 `disc_id`  |
| `track_id` | `int`       | 播放曲目的 `track_id` |

#### 参数表示

```ts
interface SongPlayRecord {
  time: number;
  album_id: string;
  disc_id: number;
  track_id: number;
}
```

### 客户端设计指引

当用户播放时间过短时，不应该统计该次播放。

## 获取当前用户播放记录

### Endpoint

`GET /api/statistics/self`

### 请求

#### 请求参数

| 参数名  | 详情                                  |
| ------- | ------------------------------------- |
| `start` | 统计区间开始时间 |
| `end` | 统计区间结束时间，默认为当前时间 |

### 返回

若请求成功，返回 `SongPlayRecordResult[]` ，按照播放次数降序排序。

### 参数表示

```typescript
interface SongPlayRecordResult {
  album_id: string;
  disc_id: number;
  track_id: number;
  count: number;
}
```

## 获取歌曲的播放统计

### Endpoint

`GET /api/statistics/song`

### 请求

#### 请求参数

| 参数名     | 详情                          |
| ---------- | ----------------------------- |
| `album_id` | 请求歌曲所属专辑的 `album_id` |
| `disc_id`  | 请求歌曲的 `disc_id`          |
| `track_id` | 请求歌曲的 `track_id`         |

### 返回

若请求成功，返回对应曲目的播放统计。

#### 返回参数

| 参数名  | 类型     | 详情               |
| ------- | -------- | ------------------ |
| `count` | `number` | 请求曲目的播放次数 |
