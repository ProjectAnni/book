# 专辑元数据

`Anniv` 对 repo 元数据进行索引以及封装。

## 结构定义

```ts
interface TrackInfo {
  title: string;
  artist: string;
  type: string;
  tags: string[];
}

interface TrackInfoWithAlbum extends TrackInfo {
  // track_id 与 disc_id 均为从 1 开始
  track_id: number;
  disc_id: number;
  album_id: string;
}

interface DiscInfo {
  // meta 仓库中为空时返回所属 Album 的 title
  title: string;
  artist: string;
  catalog: string;
  tags: string[];
  type: string;
  tracks: TrackInfo[];
}

interface AlbumInfo {
  album_id: string;
  title: string;
  edition?: string;
  catalog: string;
  artist: string;
  date: string;
  tags: string[];
  type: string;
  discs: DiscInfo[];
}
```

## Tag 列表

`GET /api/meta/tags`

### 返回

返回 `string[]` 。

## 专辑信息

支持同时请求多个专辑信息。

### Endpoint

`GET /api/meta/album?id[]=...&id[]=...&...`

### 请求参数

| 参数名 | 说明    |
| ------ | ------- |
| `id`   | 专辑 ID |

### 返回

返回 `Record<String, AlbumInfo | null>` 。

其中，键为 `album_id` 。查询成功的，对应值为 `AlbumInfo` ，否则为 `null` 。

## 按 Tag 检索专辑

`POST /api/meta/albums/by-tag`

### 参数

| 参数名 | 类型     | 说明 |
| ------ | -------- | ---- |
| `tag`  | `string` | Tag  |

返回 `AlbumInfo[]` 。
