# 两步验证（2fa）

## 适用范围

- 用户注册
- 用户登录
- 其他敏感操作处

TODO: 列举出用到 `2FA` 的所有位置

## 参数列表

| 参数名       | 类型     | 详情                                                            |
| ------------ | -------- | --------------------------------------------------------------- |
| `2fa_secret` | `String` | 两步验证的 `Secret`，注册时由客户端生成，验证成功后发送至服务端 |
| `2fa_code`   | `\d{6}`  | 两步验证的代码                                                  |


## 错误列表

| 错误代码 | 状态码                     | 详情                       |
| -------- | -------------------------- | -------------------------- |
| `200200` | `422 Unprocessable Entity` | 用户或服务端未启用两步验证 |
| `200201` | `403 Forbidden`            | 两步验证代码错误           |
| `200202` | `400 Bad Request`          | 两步验证 `Secret` 非法     |

## 接口列表

### GET /api/features/2fa/enabled

查询某用户是否启用了两步验证。

#### 参数

| 参数名  | 类型     | 详情             |
| ------- | -------- | ---------------- |
| `email` | `String` | 待查询用户的邮箱 |

#### 返回

一个整数，`0` 表示未启用，`1` 表示启用。
