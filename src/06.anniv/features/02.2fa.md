# 两步验证（2fa）

## 适用范围

注册、登录等敏感操作处。

TODO: 列举出用到 `2FA` 的所有位置

## 参数列表

| 参数名       | 类型     | 详情                                                  |
| ------------ | -------- | ----------------------------------------------------- |
| `2fa_secret` | `String` | 两步验证的 `Secret`，注册时由客户端生成并发送至服务端 |
| `2fa_code`   | `\d{6}`  | 两步验证的代码，进行敏感操作时提供                    |


## 错误列表

| 错误代码 | 状态码                     | 详情                     |
| -------- | -------------------------- | ------------------------ |
| `202000` | `422 Unprocessable Entity` | 用户或服务端未启用 `2FA` |
| `202001` | `403 Forbidden`            | 两步验证代码错误         |
| `202002` | `400 Bad Request`          | 两步验证 `Secret` 非法   |

## 接口列表

### GET /api/features/2fa/enabled

查询某用户是否启用了两步验证。

#### 参数

| 参数名  | 类型     | 详情                          |
| ------- | -------- | ----------------------------- |
| `email` | `String` | 需要查询是否启用 `2FA` 的用户 |

#### 返回

一个整数，`0` 表示未启用，`1` 表示启用。
