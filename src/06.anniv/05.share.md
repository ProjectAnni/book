# 分享管理

> ⚠️ 该部分尚未设计完成

`Anniv` 基于[信息导出格式](./export-format/00.readme.md)实现单曲、专辑和播放列表的分享。

## 错误一览

| 错误代码 | 详情               |
| -------- | ------------------ |
| `105000` | 用户分享数已达上限 |
| `105001` | 分享链接不存在     |

## 获取分享链接内容

### Endpoint

`GET /api/share`

### 请求

#### 请求参数

| 参数名 | 类型     | 详情          |
| ------ | -------- | ------------- |
| `id`   | `string` | 分享链接的 ID |

### 返回

返回分享链接的实际内容。

### 错误列表

| 错误代码 | 详情           |
| -------- | -------------- |
| `105001` | 分享链接不存在 |

## 获取分享连接列表

### Endpoint

`GET /api/share/`

### 返回

返回当前用户创建的所有分享链接列表。

#### 返回参数

| 参数名 | 类型        | 详情          |
| ------ | ----------- | ------------- |
| `id`   | `string`    | 分享链接的 ID |
| `date` | `timestamp` | 分享创建日期  |

## 创建分享链接

创建分享链接时，客户端需要提供待分享资源的元数据和供被分享人播放音乐的分享 `Token`。`Anniv` 负责记录用户提供的上述信息，并存储一份用户指定播放列表的快照。

### Endpoint

`POST /api/share`

### 请求

#### 请求参数

| 参数名 | 类型     | 详情     |
| ------ | -------- | -------- |
| `data` | `string` | 实际内容 |

### 返回

请求成功时，返回分享链接的短部。

### 错误列表

| 错误代码 | 详情               |
| -------- | ------------------ |
| `105000` | 用户分享数已达上限 |

## 删除分享链接

### Endpoint

`DELETE /api/share`

### 请求

#### 请求参数

| 参数名 | 类型     | 详情                |
| ------ | -------- | ------------------- |
| `id`   | `string` | 待删除分享链接的 ID |

## 错误列表

| 错误代码 | 详情           |
| -------- | -------------- |
| `902000` | 分享链接不存在 |
